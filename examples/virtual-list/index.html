<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dalila - d-each vs d-virtual-each comparison</title>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500;700&family=IBM+Plex+Mono:wght@400;600&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="/examples/virtual-list/style.css" />
  <script type="module" src="/examples/virtual-list/script.ts"></script>
</head>

<body>
  <main class="page">
    <header class="hero">
      <p class="eyebrow">Dalila Runtime</p>
      <h1>d-each vs d-virtual-each</h1>
      <p class="subtitle">
        A simple comparison using the same dataset. On large lists,
        <code>d-virtual-each</code> keeps only a few active DOM nodes.
      </p>
    </header>

    <section class="controls">
      <button class="btn" d-on-click="load500">500 items</button>
      <button class="btn" d-on-click="load5000">5,000 items</button>
      <button class="btn" d-on-click="load20000">20,000 items</button>

      <div class="stats">
        <span>Total: <strong>{totalRowsLabel}</strong></span>
        <span>Estimated DOM with <code>d-each</code>: <strong>{nativeNodeEstimateLabel}</strong></span>
        <span>Estimated DOM with <code>d-virtual-each</code>: <strong>{virtualNodeEstimateLabel}</strong></span>
        <span>Actual DOM in <code>d-each</code> panel: <strong>{nativeRenderedNowLabel}</strong></span>
        <span>Actual DOM in <code>d-virtual-each</code> panel: <strong>{virtualRenderedNowLabel}</strong></span>
      </div>

      <p class="status">{buildInfo}</p>
    </section>

    <section class="grid">
      <article class="panel">
        <header class="panel-header">
          <h2>Full render (<code>d-each</code>)</h2>
          <p>Renders all items at once.</p>
        </header>

        <div class="list-viewport native-viewport">
          <div class="row row-native" d-each="rows" d-key="id">
            <span class="id">#{id}</span>
            <span class="title">{title}</span>
            <span class="meta">{group} · {score}</span>
          </div>
        </div>
      </article>

      <article class="panel">
        <header class="panel-header">
          <h2>Virtualized render (<code>d-virtual-each</code>)</h2>
          <p>
            Renders only the visible window + overscan
            (<strong>{virtualWindowLabel}</strong> rows approx).
          </p>
        </header>

        <div class="list-viewport virtual-viewport">
          <div
            class="row row-virtual"
            d-virtual-each="rows"
            d-key="id"
            d-virtual-item-height="40"
            d-virtual-overscan="8"
          >
            <span class="id">#{id}</span>
            <span class="title">{title}</span>
            <span class="meta">{group} · {score}</span>
          </div>
        </div>
      </article>
    </section>
  </main>
</body>
</html>
