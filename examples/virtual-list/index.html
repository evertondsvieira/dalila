<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dalila - d-each vs d-virtual-each</title>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500;700&family=IBM+Plex+Mono:wght@400;600&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="/examples/virtual-list/style.css" />
  <script type="module" src="/examples/virtual-list/script.ts"></script>
</head>

<body>
  <main class="page">
    <header class="hero">
      <p class="eyebrow">Dalila Runtime</p>
      <h1>d-each vs d-virtual-each</h1>
      <p class="subtitle">
        Comparativo simples com o mesmo dataset. Em listas grandes, o
        <code>d-virtual-each</code> mantém poucos nós ativos no DOM.
      </p>
    </header>

    <section class="controls">
      <button class="btn" d-on-click="load500">500 itens</button>
      <button class="btn" d-on-click="load5000">5.000 itens</button>
      <button class="btn" d-on-click="load20000">20.000 itens</button>

      <div class="stats">
        <span>Total: <strong>{totalRowsLabel}</strong></span>
        <span>Estimativa DOM com <code>d-each</code>: <strong>{nativeNodeEstimateLabel}</strong></span>
        <span>Estimativa DOM com <code>d-virtual-each</code>: <strong>{virtualNodeEstimateLabel}</strong></span>
        <span>DOM real no painel <code>d-each</code>: <strong>{nativeRenderedNowLabel}</strong></span>
        <span>DOM real no painel <code>d-virtual-each</code>: <strong>{virtualRenderedNowLabel}</strong></span>
      </div>

      <p class="status">{buildInfo}</p>
    </section>

    <section class="grid">
      <article class="panel">
        <header class="panel-header">
          <h2>Renderização completa (<code>d-each</code>)</h2>
          <p>Renderiza todos os itens de uma vez.</p>
        </header>

        <div class="list-viewport native-viewport">
          <div class="row row-native" d-each="rows" d-key="id">
            <span class="id">#{id}</span>
            <span class="title">{title}</span>
            <span class="meta">{group} · {score}</span>
          </div>
        </div>
      </article>

      <article class="panel">
        <header class="panel-header">
          <h2>Renderização virtualizada (<code>d-virtual-each</code>)</h2>
          <p>
            Renderiza apenas a janela visível + overscan
            (<strong>{virtualWindowLabel}</strong> linhas aprox).
          </p>
        </header>

        <div class="list-viewport virtual-viewport">
          <div
            class="row row-virtual"
            d-virtual-each="rows"
            d-key="id"
            d-virtual-item-height="40"
            d-virtual-overscan="8"
          >
            <span class="id">#{id}</span>
            <span class="title">{title}</span>
            <span class="meta">{group} · {score}</span>
          </div>
        </div>
      </article>
    </section>
  </main>
</body>
</html>
